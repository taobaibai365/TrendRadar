# ===============================================================
# 1. 基础设置
# ===============================================================
app:
  # 时区配置（影响所有时间显示、推送窗口判断、数据存储）
  # 常用时区：
  #   - Asia/Shanghai (北京时间 UTC+8)
  #   - America/New_York (美东时间 UTC-5/-4)
  #   - Europe/London (伦敦时间 UTC+0/+1)
  # 完整时区列表: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
  timezone: "Asia/Shanghai"
  show_version_update: true           # 显示版本更新提示


# ===============================================================
# 2. AI 分析设置 (新)
# ===============================================================
ai:
  # AI 服务提供商，目前仅支持 "gemini"
  provider: "gemini"

  # Google Gemini API Key
  # 强烈建议使用环境变量 `GEMINI_API_KEY` 进行配置，以保证安全。
  # 如果留空，程序会尝试从环境变量中读取。
  # 在 GitHub Actions 中, 请将其配置在 Secrets 中。
  api_key: ""  # 例如: "your_api_key_here"

  # 使用的模型名称
  model_name: "gemini-pro"


# ===============================================================
# 3. 数据源 - 热榜平台
# ===============================================================
platforms:
  - id: "toutiao"
    name: "今日头条"
  - id: "baidu"
    name: "百度热搜"
  - id: "wallstreetcn-hot"
    name: "华尔街见闻"
  - id: "thepaper"
    name: "澎湃新闻"
  - id: "bilibili-hot-search"
    name: "bilibili 热搜"
  - id: "cls-hot"
    name: "财联社热门"
  - id: "ifeng"
    name: "凤凰网"
  - id: "tieba"
    name: "贴吧"
  - id: "weibo"
    name: "微博"
  - id: "douyin"
    name: "抖音"
  - id: "zhihu"
    name: "知乎"


# ===============================================================
# 4. 数据源 - RSS 订阅
# ===============================================================
rss:
  enabled: true                       # 是否启用 RSS 抓取

  # 文章新鲜度过滤配置（全局默认值）
  freshness_filter:
    enabled: true                     # 是否启用新鲜度过滤（默认启用）
    max_age_days: 3                   # 最大文章年龄（天）

  feeds:
    - id: "hacker-news"
      name: "Hacker News"
      url: "https://hnrss.org/frontpage"

    - id: "ruanyifeng"
      name: "阮一峰的网络日志"
      url: "http://www.ruanyifeng.com/blog/atom.xml"
    
    - id: "yahoo-finance"
      name: "雅虎财经"
      url: "https://finance.yahoo.com/news/rssindex"
      enabled: false                  # 禁用


# ===============================================================
# 5. 报告与分析模式
# ===============================================================
report:
  mode: "current"                     # 可选: daily | current | incremental
  display_mode: "keyword"             # 可选: keyword | platform
  rank_threshold: 5                   # 排名高亮阈值
  sort_by_position_first: false       # true=按配置位置排序，false=按热点条数排序
  max_news_per_keyword: 0             # 每个关键词最大显示数量（0=不限制）
  reverse_content_order: false        # false=热点词汇统计在前，true=新增热点新闻在前


# ===============================================================
# 6. 推送与集成
# ===============================================================
notification:
  enabled: true                       # 是否启用通知功能

  push_window:
    enabled: false                    # 是否启用推送时间窗口控制
    start: "20:00"                    # 开始时间（北京时间）
    end: "22:00"                      # 结束时间（北京时间）
    once_per_day: true                # true=窗口内只推送一次，false=窗口内每次执行都推送

  channels:
    feishu:
      webhook_url: ""
    dingtalk:
      webhook_url: ""
    wework:
      webhook_url: ""
      msg_type: "markdown"
    telegram:
      bot_token: ""
      chat_id: ""
    email:
      from: ""
      password: ""
      to: ""
      smtp_server: ""
      smtp_port: ""
    ntfy:
      server_url: "https://ntfy.sh"
      topic: ""
      token: ""
    bark:
      url: ""
    slack:
      webhook_url: ""

# (新) 第三方集成
integrations:
  obsidian:
    # “导出到 Obsidian” 功能的目标目录
    # 请填入你的 Obsidian Vault 中用于存放笔记的文件夹的绝对路径
    # 例如: "/Users/yourname/Documents/ObsidianVault/Inbox"
    export_path: ""


# ===============================================================
# 7. 存储配置
# ===============================================================
storage:
  backend: "auto"
  formats:
    sqlite: true
    txt: false
    html: true
  local:
    data_dir: "output"
    retention_days: 0
  remote:
    retention_days: 0
    endpoint_url: ""
    bucket_name: ""
    access_key_id: ""
    secret_access_key: ""
    region: ""
  pull:
    enabled: false
    days: 7


# ===============================================================
# 8. 高级设置（一般无需修改）
# ===============================================================
advanced:
  version_check_url: "https://raw.githubusercontent.com/sansan0/TrendRadar/refs/heads/master/version"

  crawler:
    enabled: true
    request_interval: 1000
    use_proxy: false
    default_proxy: "http://127.0.0.1:10801"

  rss:
    request_interval: 2000
    timeout: 15
    use_proxy: false
    proxy_url: ""
    notification_enabled: true

  # (新) API 服务器配置
  api_server:
    host: "0.0.0.0"
    port: 3334

  weight:
    rank: 0.6
    frequency: 0.3
    hotness: 0.1

  max_accounts_per_channel: 3

  batch_size:
    default: 4000
    dingtalk: 20000
    feishu: 30000
    bark: 4000
    slack: 4000
  batch_send_interval: 3
  feishu_message_separator: "━━━━━━━━━━━━━━━━━━━"
